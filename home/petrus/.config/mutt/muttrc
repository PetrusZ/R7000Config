# vim: filetype=neomuttrc
source /usr/share/mutt-wizard/mutt-wizard.muttrc # mw-autogenerated
source /home/petrus/.config/mutt/accounts/1-petrus.muttrc # mw-autogenerated
macro index,pager i1 '<sync-mailbox><enter-command>source /home/petrus/.config/mutt/accounts/1-petrus.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to petrus.zy.07@gmail.com" # mw-autogenerated
macro index,pager i2 '<sync-mailbox><enter-command>source /home/petrus/.config/mutt/accounts/2-silencly07.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to silencly07@gmail.com" # mw-autogenerated
macro index,pager i3 '<sync-mailbox><enter-command>source /home/petrus/.config/mutt/accounts/3-gitea.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to gitea@codeplayer.org" # mw-autogenerated
macro index,pager i4 '<sync-mailbox><enter-command>source /home/petrus/.config/mutt/accounts/4-watchtower.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to watchtower@codeplayer.org" # mw-autogenerated
macro index,pager i5 '<sync-mailbox><enter-command>source /home/petrus/.config/mutt/accounts/5-crontab.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to crontab@codeplayer.org" # mw-autogenerated

set mailcap_path = ~/.config/mutt/mailcap

set sort = reverse-threads
set sort_aux = last-date-received

set check_new = yes
#当在用 pager 看信件时，在 index 留出多少行显示邮件列表？
set pager_index_lines=5
set pager_stop=yes

# only if you compiled Mutt with USE=gpgme, enable the gpgme backend
set crypt_use_gpgme = yes
# set crypt_autoencrypt = yes
# set crypt_replyencrypt = yes
set crypt_opportunistic_encrypt = yes
set crypt_replysignencrypted = yes

# character set on sent messages
set send_charset="utf-8"
# if there is no character set given on incoming messages, it is probably windows
# set assumed_charset="iso-8859-1"

subscribe "gentoo-.*@lists\\.gentoo\\.org"

# 预览word文件
#application/msword; wvHtml --charset=gb2312 %s - | lynx --dump -stdin; nametemplate=%s.html; copiousoutput
# auto_view text/html application/msword

bind pager,index                l  list-reply

# simulate the old url menu
macro index,pager,attach,compose \cl "\
<enter-command> set my_pipe_decode=\$pipe_decode pipe_decode<Enter>\
<pipe-message> urlview<Enter>\
<enter-command> set pipe_decode=\$my_pipe_decode; unset my_pipe_decode<Enter>" \
"call urlview to extract URLs out of a message"
macro index <ESC>f "<enter-command>unset wait_key<enter><shell-escape>read -p 'Enter a search term to find with notmuch: ' x; echo \$x >~/.cache/mutt_terms<enter><limit>~i \"\`notmuch search --output=messages \$(cat ~/.cache/mutt_terms) | head -n 600 | perl -le '@a=<>;s/\^id:// for@a;$,=\"|\";print@a' | perl -le '@a=<>; chomp@a; s/\\+/\\\\+/ for@a;print@a' \`\"<enter>" "show only messages matching a notmuch pattern"
macro index 'c' '<change-folder>?<change-dir><home>^K=<enter>'
macro attach W <save-entry><kill-line>/home/petrus/Downloads/attachments/
macro attach E <save-entry><kill-line>/home/petrus/Downloads/attachments/<enter>

source ~/.config/mutt/rc/vim-keys.rc
source ~/.config/mutt/rc/diff_view.rc
# source ~/.config/mutt/rc/gpg.rc
# source ~/.config/mutt/rc/colors-gruvbox-shuber.muttrc
# source ~/.config/mutt/rc/colors-gruvbox-shuber-extended.muttrc
